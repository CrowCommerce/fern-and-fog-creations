{%- comment -%}
  Cart Drawer Section - Converted from Next.js ShoppingCartDrawer component
  Slide-out cart panel with item management
{%- endcomment -%}

<div class="relative z-[60]" data-cart-drawer style="display: none;">
  <div class="fixed inset-0 bg-moss/75 transition-opacity" data-cart-drawer-backdrop></div>

  <div class="fixed inset-0 overflow-hidden">
    <div class="absolute inset-0 overflow-hidden">
      <div class="pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16">
        <div class="pointer-events-auto w-screen max-w-md transform transition-transform" data-cart-drawer-panel>
          <div class="flex h-full flex-col overflow-y-auto bg-parchment shadow-xl">

            {%- comment -%} Header {%- endcomment -%}
            <div class="flex-1 overflow-y-auto px-4 py-6 sm:px-6">
              <div class="flex items-start justify-between">
                <h2 class="text-lg font-display font-semibold text-bark">
                  {{ 'cart.general.title' | t }}
                </h2>
                <div class="ml-3 flex h-7 items-center">
                  <button
                    type="button"
                    class="relative -m-2 p-2 text-bark hover:text-fern transition-colors"
                    data-cart-drawer-close
                    aria-label="{{ 'general.accessibility.close' | t }}"
                  >
                    <span class="absolute -inset-0.5"></span>
                    <span class="sr-only">{{ 'general.accessibility.close' | t }}</span>
                    <svg class="size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
              </div>

              {%- comment -%} Cart Items or Empty State {%- endcomment -%}
              <div class="mt-8" data-cart-items-wrapper>
                {%- if cart.item_count == 0 -%}
                  <div class="text-center py-12" data-cart-empty>
                    <svg class="mx-auto h-12 w-12 text-bark/30" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    <h3 class="mt-4 text-sm font-medium text-bark">{{ 'cart.general.empty' | t }}</h3>
                    <p class="mt-2 text-sm text-bark/60">
                      {{ 'cart.general.empty_description' | t }}
                    </p>
                    <div class="mt-6">
                      <a
                        href="{{ routes.all_products_collection_url }}"
                        class="inline-flex items-center px-4 py-2 text-sm font-medium text-parchment bg-fern hover:bg-moss transition-colors rounded-md"
                      >
                        {{ 'cart.general.browse_shop' | t }}
                      </a>
                    </div>
                  </div>
                {%- else -%}
                  <div class="flow-root" data-cart-items>
                    <ul role="list" class="-my-6 divide-y divide-bark/10">
                      {%- for item in cart.items -%}
                        <li class="flex py-6" data-cart-item data-item-key="{{ item.key }}">
                          <div class="size-24 shrink-0 overflow-hidden rounded-md ring-1 ring-bark/20">
                            {%- if item.image -%}
                              <img
                                src="{{ item.image | image_url: width: 96 }}"
                                alt="{{ item.product.title | escape }}"
                                width="96"
                                height="96"
                                class="size-full object-cover"
                                loading="lazy"
                              >
                            {%- endif -%}
                          </div>

                          <div class="ml-4 flex flex-1 flex-col">
                            <div>
                              <div class="flex justify-between text-base font-medium text-bark">
                                <h3>
                                  <a href="{{ item.url }}" class="hover:text-fern transition-colors">
                                    {{ item.product.title }}
                                  </a>
                                </h3>
                                <p class="ml-4">{{ item.final_price | money }}</p>
                              </div>
                              {%- unless item.product.has_only_default_variant -%}
                                <p class="mt-1 text-sm text-bark/60">{{ item.variant.title }}</p>
                              {%- endunless -%}
                            </div>

                            <div class="flex flex-1 items-end justify-between text-sm">
                              <div class="flex items-center space-x-2">
                                <button
                                  type="button"
                                  class="p-1 text-bark hover:text-fern transition-colors"
                                  aria-label="{{ 'cart.item.decrease_quantity' | t }}"
                                  data-cart-item-decrease
                                  data-item-key="{{ item.key }}"
                                >
                                  <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14" />
                                  </svg>
                                </button>
                                <span class="text-bark font-medium w-8 text-center" data-item-quantity>
                                  {{ item.quantity }}
                                </span>
                                <button
                                  type="button"
                                  class="p-1 text-bark hover:text-fern transition-colors"
                                  aria-label="{{ 'cart.item.increase_quantity' | t }}"
                                  data-cart-item-increase
                                  data-item-key="{{ item.key }}"
                                >
                                  <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14m7-7H5" />
                                  </svg>
                                </button>
                              </div>

                              <div class="flex">
                                <button
                                  type="button"
                                  class="font-medium text-fern hover:text-moss transition-colors"
                                  data-cart-item-remove
                                  data-item-key="{{ item.key }}"
                                >
                                  {{ 'cart.item.remove' | t }}
                                </button>
                              </div>
                            </div>
                          </div>
                        </li>
                      {%- endfor -%}
                    </ul>
                  </div>
                {%- endif -%}
              </div>
            </div>

            {%- comment -%} Footer / Checkout {%- endcomment -%}
            {%- if cart.item_count > 0 -%}
              <div class="border-t border-bark/20 px-4 py-6 sm:px-6" data-cart-footer>
                <div class="flex justify-between text-base font-medium text-bark">
                  <p>{{ 'cart.general.subtotal' | t }}</p>
                  <p class="font-display" data-cart-total>{{ cart.total_price | money }}</p>
                </div>
                <p class="mt-0.5 text-sm text-bark/60">
                  {{ 'cart.general.shipping_note' | t }}
                </p>

                <div class="mt-6">
                  <a
                    href="{{ routes.cart_url }}"
                    class="flex items-center justify-center rounded-md border-2 border-fern bg-fern px-6 py-3 text-base font-medium text-parchment hover:bg-moss hover:border-moss transition-colors"
                  >
                    {{ 'cart.general.view_cart' | t }}
                  </a>
                </div>

                <div class="mt-6 flex justify-center text-center text-sm text-bark/60">
                  <p>
                    or{' '}
                    <button
                      type="button"
                      class="font-medium text-fern hover:text-moss transition-colors"
                      data-cart-drawer-close
                    >
                      {{ 'cart.general.continue_shopping' | t }}
                      <span aria-hidden="true"> &rarr;</span>
                    </button>
                  </p>
                </div>
              </div>
            {%- endif -%}

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Cart Drawer",
  "settings": []
}
{% endschema %}
